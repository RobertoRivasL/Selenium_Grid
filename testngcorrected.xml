<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd">

<!--
âœ… CONFIGURACIÃ“N OPTIMIZADA PARA SELENIUM GRID - VERSIÃ“N CORREGIDA
- ParalelizaciÃ³n segura por mÃ©todos
- Thread count optimizado para Docker
- Timeouts configurados apropiadamente
- Allure reporting integrado
- ConfiguraciÃ³n de retry en caso de fallos
-->

<suite name="SeleniumGridCorrectedSuite"
       parallel="methods"
       thread-count="6"
       verbose="2"
       data-provider-thread-count="3"
       time-out="180000"
       preserve-order="false">

    <!-- âœ… ParÃ¡metros globales -->
    <parameter name="hub.url" value="http://localhost:4444/wd/hub"/>
    <parameter name="timeout.implicit" value="10"/>
    <parameter name="timeout.explicit" value="20"/>

    <!-- âœ… Listeners para reporting y retry -->
    <listeners>
        <listener class-name="io.qameta.allure.testng.AllureTestNg"/>
        <!-- Opcional: Retry listener personalizado -->
        <!-- <listener class-name="com.selenium.grid.test.RetryListener"/> -->
    </listeners>

    <!-- âœ… Test principal con todos los navegadores -->
    <test name="CrossBrowserTestsCorrected"
          preserve-order="false"
          group-by-instances="true">

        <classes>
            <class name="com.selenium.grid.test.SeleniumGridDataProviderTest">
                <methods>
                    <!-- âœ… Orden de ejecuciÃ³n optimizado -->
                    <include name="testGoogleSearch"/>
                    <include name="testSeleniumHQ"/>
                    <include name="testDuckDuckGo"/>
                    <include name="testExampleDomain"/>
                </methods>
            </class>
        </classes>
    </test>

    <!--
    âœ… CONFIGURACIÃ“N ALTERNATIVA: Tests por grupos
    Descomenta si quieres ejecutar tests por grupos especÃ­ficos
    -->
    <!--
    <test name="SmokeTests" preserve-order="false">
        <groups>
            <run>
                <include name="smoke"/>
            </run>
        </groups>
        <classes>
            <class name="com.selenium.grid.test.SeleniumGridDataProviderTest"/>
        </classes>
    </test>

    <test name="RegressionTests" preserve-order="false">
        <groups>
            <run>
                <include name="regression"/>
            </run>
        </groups>
        <classes>
            <class name="com.selenium.grid.test.SeleniumGridTestCorrected"/>
        </classes>
    </test>
    -->

</suite>

        <!--
        ðŸ”§ CONFIGURACIONES ADICIONALES DISPONIBLES:

        1. CONFIGURACIÃ“N PARA DESARROLLO (tests mÃ¡s rÃ¡pidos):
        <suite name="DevSuite" parallel="methods" thread-count="2">
            <parameter name="timeout.implicit" value="5"/>
            <parameter name="timeout.explicit" value="10"/>
            ...
        </suite>

        2. CONFIGURACIÃ“N PARA CI/CD (mÃ¡s robusta):
        <suite name="CISuite" parallel="methods" thread-count="3">
            <parameter name="timeout.implicit" value="15"/>
            <parameter name="timeout.explicit" value="30"/>
            ...
        </suite>

        3. CONFIGURACIÃ“N PARA DEBUG (sin paralelizaciÃ³n):
        <suite name="DebugSuite" parallel="false" thread-count="1">
            <parameter name="timeout.implicit" value="30"/>
            <parameter name="timeout.explicit" value="60"/>
            ...
        </suite>
        -->